<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Merry Christmas</title>

<style>
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
        overflow:hidden;
        background:#120622;
        font-family:sans-serif;
        text-align:center;
        color:white;
    }
    #titleText{
        font-size:42px;
        font-weight:bold;
        margin-top:30px;
        color:#ffb6f6;
        text-shadow:0 0 14px #ff80f7;
        position:relative;
        z-index:5;
    }
    #subText{
        font-size:24px;
        margin-top:8px;
        color:#ffeaff;
        text-shadow:0 0 10px #ff99ff;
        position:relative;
        z-index:5;
    }
</style>

<script src="https://cdn.jsdelivr.net/npm/three@0.115/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.115/examples/js/postprocessing/EffectComposer.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.115/examples/js/postprocessing/RenderPass.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.115/examples/js/postprocessing/UnrealBloomPass.js"></script>

</head>
<body>

<div id="titleText">璐璐 圣诞快乐</div>
<div id="subText">Merry Christmas ✨</div>

<script>
let scene, camera, renderer, composer;
let objects = [];

function init(){
    scene = new THREE.Scene();

    renderer = new THREE.WebGLRenderer({ antialias:true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    camera = new THREE.PerspectiveCamera(
        60,
        window.innerWidth/window.innerHeight,
        1,
        2000
    );
    camera.position.set(0,0,450);

    // 发光
    composer = new THREE.EffectComposer(renderer);
    const renderPass = new THREE.RenderPass(scene, camera);
    const bloomPass = new THREE.UnrealBloomPass(
        new THREE.Vector2(window.innerWidth,window.innerHeight),
        1.2,0.4,0.6
    );
    composer.addPass(renderPass);
    composer.addPass(bloomPass);

    createTree();
    createSnow();

    animate();
}

function createTree(){
    const geometry = new THREE.BufferGeometry();
    const positions = [];
    const total = 3000;

    for(let i=0;i<total;i++){
        const layer = Math.random() * 22;
        const radius = 160 - layer * 6;
        const angle = Math.random() * Math.PI * 2;

        const x = Math.cos(angle)*radius;
        const y = layer*12 - 140;
        const z = Math.sin(angle)*radius;

        positions.push(x,y,z);
    }

    geometry.setAttribute("position", new THREE.Float32BufferAttribute(positions,3));

    const material = new THREE.PointsMaterial({
        color:0xffbbff,
        size:6,
        transparent:true,
        opacity:0.95
    });

    const tree = new THREE.Points(geometry,material);
    tree.isTree = true;

    objects.push(tree);
    scene.add(tree);
}

function createSnow(){
    const geometry = new THREE.BufferGeometry();
    const positions = [];

    for(let i=0;i<2500;i++){
        const x = (Math.random()-0.5)*1000;
        const y = Math.random()*600 - 300;
        const z = (Math.random()-0.5)*1000;
        positions.push(x,y,z);
    }

    geometry.setAttribute("position", new THREE.Float32BufferAttribute(positions,3));

    const material = new THREE.PointsMaterial({
        color:0xffffff,
        size:4,
        opacity:0.8
    });

    const snow = new THREE.Points(geometry, material);
    snow.isTree = false;

    objects.push(snow);
    scene.add(snow);
}

function animate(){
    requestAnimationFrame(animate);

    objects.forEach(obj=>{
        obj.rotation.y += 0.0008;
    });

    composer.render();
}

init();
</script>

</body>
</html>
