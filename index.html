<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <title>琰琰 圣诞快乐</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      overflow: hidden;
      background: #03010f;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    }
    .title {
      position: fixed;
      top: 5%;
      left: 50%;
      transform: translateX(-50%);
      text-align: center;
      color: #ffe8ff;
      text-shadow: 0 0 15px rgba(255,150,240,0.9);
      z-index: 10;
      pointer-events: none;
    }
    .title-main {
      font-size: 2rem;
      font-weight: 700;
      letter-spacing: 0.15em;
    }
    .title-sub {
      margin-top: 6px;
      font-size: 1.2rem;
    }
  </style>
</head>
<body>

<div class="title">
  <div class="title-main">琰琰 圣诞快乐</div>
  <div class="title-sub">Merry Christmas ✨</div>
</div>

<!-- 引入 three.js CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r152/three.min.js"></script>

<script>
  // 创建场景、摄像机、渲染器
  const scene = new THREE.Scene();
  const camera = new THREE.PerspectiveCamera(60, window.innerWidth / window.innerHeight, 1, 2000);
  camera.position.set(0, 150, 500);

  const renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setSize(window.innerWidth, window.innerHeight);
  document.body.appendChild(renderer.domElement);

  // 创建圣诞树粒子
  const treeParticles = [];
  const particleCount = 9000; // 粒子数量
  const geometry = new THREE.BufferGeometry();
  const positions = [];
  const colors = [];
  const sizes = [];

  for (let i = 0; i < particleCount; i++) {
    const level = Math.random();            // 0~1 (底→顶)
    const radius = (1 - level) * 180;       // 树的横向半径
    const angle = Math.random() * Math.PI * 6;  // 多圈螺旋感
    const x = Math.sin(angle) * radius;
    const z = Math.cos(angle) * radius;
    const y = level * 350 - 100;

    positions.push(x, y, z);

    // 粉色光点
    const r = 1.0;
    const g = 0.65 + Math.random() * 0.2;
    const b = 0.9 + Math.random() * 0.1;
    colors.push(r, g, b);

    sizes.push(3 + Math.random() * 3);
  }

  geometry.setAttribute('position', new THREE.Float32BufferAttribute(positions, 3));
  geometry.setAttribute('color', new THREE.Float32BufferAttribute(colors, 3));
  geometry.setAttribute('size', new THREE.Float32BufferAttribute(sizes, 1));

  const material = new THREE.PointsMaterial({
    vertexColors: true,
    size: 6,
    sizeAttenuation: true,
    transparent: true,
    opacity: 0.9
  });

  const tree = new THREE.Points(geometry, material);
  scene.add(tree);

  // 大量雪花
  const snowGeo = new THREE.BufferGeometry();
  const snowCount = 2000;
  const snowPos = [];

  for (let i = 0; i < snowCount; i++) {
    snowPos.push(
      (Math.random() - 0.5) * 1500,
      Math.random() * 800,
      (Math.random() - 0.5) * 1500
    );
  }

  snowGeo.setAttribute('position', new THREE.Float32BufferAttribute(snowPos, 3));
  const snowMat = new THREE.PointsMaterial({
    color: 0xffffff,
    size: 4,
    transparent: true,
    opacity: 0.8
  });
  const snow = new THREE.Points(snowGeo, snowMat);
  scene.add(snow);

  // 光照
  const light = new THREE.PointLight(0xff88cc, 1.5, 2000);
  light.position.set(0, 300, 400);
  scene.add(light);

  // 动画
  function animate() {
    requestAnimationFrame(animate);

    tree.rotation.y += 0.002;  // 树缓慢旋转
    snow.position.y -= 1;      // 雪下落
    if (snow.position.y < -200) snow.position.y = 400;

    renderer.render(scene, camera);
  }
  animate();

  // 自适应窗口
  window.addEventListener("resize", () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
  });
</script>

</body>
</html>
